# Структура проєкту ContentAI

Цей документ описує структуру проєкту ContentAI після оптимізації.

## Загальна структура

```
contentAI/
├── app.py                  # Головний файл для запуску всього додатку
├── start_servers.sh        # Скрипт для запуску серверів
├── stop_servers.sh         # Скрипт для зупинки серверів
├── backend-api/            # Бекенд на Flask
├── frontend-app/           # Фронтенд на Next.js
├── docs/                   # Документація
└── backup/                 # Резервні копії
```

## Бекенд (backend-api)

```
backend-api/
├── app.py                  # Головний файл бекенду
├── models.py               # Моделі даних
├── utils.py                # Утиліти
├── requirements.txt        # Залежності
├── auth/                   # Модуль автентифікації
│   ├── __init__.py
│   └── routes.py           # Маршрути автентифікації
├── content/                # Модуль генерації контенту
│   ├── __init__.py
│   └── routes.py           # Маршрути генерації контенту
├── subscription/           # Модуль підписок
│   ├── __init__.py
│   └── routes.py           # Маршрути підписок
├── utils/                  # Утиліти
│   ├── __init__.py
│   └── i18n.py             # Функції локалізації
├── models/                 # Моделі даних
│   ├── __init__.py
│   ├── user/               # Модель користувача
│   │   ├── __init__.py
│   │   └── model.py
│   ├── content/            # Моделі контенту
│   │   ├── __init__.py
│   │   └── model.py
│   └── payment/            # Моделі платежів
│       ├── __init__.py
│       └── model.py
├── locales/                # Файли локалізації
│   ├── uk.json             # Українська локалізація
│   └── en.json             # Англійська локалізація
├── tests/                  # Тести
│   ├── __init__.py
│   ├── auth/               # Тести автентифікації
│   │   ├── __init__.py
│   │   └── test_auth.py
│   ├── content/            # Тести генерації контенту
│   │   ├── __init__.py
│   │   └── test_content.py
│   ├── subscription/       # Тести підписок
│   │   ├── __init__.py
│   │   └── test_subscription.py
│   └── utils/              # Тести утиліт
│       ├── __init__.py
│       └── test_i18n.py
└── venv/                   # Віртуальне середовище Python
```

### Опис ключових файлів бекенду

- **app.py**: Головний файл бекенду, який ініціалізує Flask додаток, реєструє маршрути та запускає сервер.
- **models.py**: Містить моделі даних для бази даних SQLAlchemy.
- **utils.py**: Містить утилітарні функції, які використовуються в різних частинах додатку.
- **auth/routes.py**: Містить маршрути для автентифікації та авторизації користувачів.
- **content/routes.py**: Містить маршрути для генерації контенту.
- **subscription/routes.py**: Містить маршрути для управління підписками.
- **utils/i18n.py**: Містить функції для роботи з локалізацією.
- **locales/uk.json**, **locales/en.json**: Файли локалізації для української та англійської мов.

### Тести

```
backend-api/tests/
├── auth/                  # Тести для модуля автентифікації
│   └── test_auth.py       # Тести для функцій автентифікації
├── content/               # Тести для модуля генерації контенту
│   └── test_content.py    # Тести для функцій генерації контенту
├── integration/           # Інтеграційні тести
│   ├── test_auth_content.py         # Тести взаємодії автентифікації та контенту
│   ├── test_auth_subscription.py    # Тести взаємодії автентифікації та підписок
│   ├── test_subscription_content.py # Тести взаємодії підписок та контенту
│   └── test_utils.py                # Утиліти для інтеграційних тестів
├── subscription/          # Тести для модуля підписок
│   └── test_subscription.py # Тести для функцій підписок
└── utils/                 # Тести для утиліт
    └── test_i18n.py       # Тести для функцій локалізації
```

## Фронтенд (frontend-app)

```
frontend-app/
├── app/                    # Головна директорія додатку Next.js
│   ├── [lang]/             # Локалізовані маршрути
│   │   ├── dictionaries.js # Функції для завантаження перекладів
│   │   ├── layout.js       # Головний макет
│   │   ├── page.js         # Головна сторінка
│   │   ├── login/          # Сторінка входу
│   │   │   └── page.js
│   │   ├── signup/         # Сторінка реєстрації
│   │   │   └── page.js
│   │   ├── profile/        # Сторінка профілю
│   │   │   └── page.js
│   │   ├── generate/       # Сторінка генерації контенту
│   │   │   └── page.js
│   │   ├── results/        # Сторінка результатів
│   │   │   └── page.js
│   │   ├── subscribe/      # Сторінка підписки
│   │   │   ├── page.js
│   │   │   └── success/    # Сторінка успішної підписки
│   │   │       └── page.js
│   │   └── trends/         # Сторінка трендів
│   │       └── page.js
│   ├── components/         # Компоненти
│   │   ├── ui/             # UI компоненти
│   │   │   ├── Button.js
│   │   │   ├── Input.js
│   │   │   └── ...
│   │   ├── layouts/        # Компоненти макетів
│   │   │   ├── Header.js
│   │   │   ├── Footer.js
│   │   │   └── ...
│   │   └── features/       # Компоненти функціональності
│   │       ├── Checkout.js
│   │       ├── WisePayment.js
│   │       └── ...
│   ├── api.js              # Функції для роботи з API
│   └── i18n/               # Конфігурація інтернаціоналізації
│       ├── client.js       # Клієнтська частина i18n
│       └── server.js       # Серверна частина i18n
├── public/                 # Статичні файли
│   └── locales/            # Файли локалізації
│       ├── uk/             # Українська локалізація
│       │   ├── auth/
│       │   │   └── common.json
│       │   ├── subscription/
│       │   │   └── common.json
│       │   └── profile/
│       │       └── common.json
│       └── en/             # Англійська локалізація
│           ├── auth/
│           │   └── common.json
│           ├── subscription/
│           │   └── common.json
│           └── profile/
│               └── common.json
├── middleware.js           # Middleware для маршрутизації з локалізацією
├── next.config.js          # Конфігурація Next.js
├── next-i18next.config.js  # Конфігурація інтернаціоналізації
├── package.json            # Залежності та скрипти
└── node_modules/           # Встановлені залежності
```

### Опис ключових файлів фронтенду

- **app/[lang]/page.js**: Головна сторінка додатку з підтримкою локалізації.
- **app/[lang]/dictionaries.js**: Функції для завантаження перекладів.
- **app/components/**: Директорія з компонентами, розділеними за функціональним призначенням.
- **app/api.js**: Функції для роботи з API бекенду.
- **middleware.js**: Middleware для маршрутизації з урахуванням локалізації.
- **next.config.js**: Конфігурація Next.js.
- **next-i18next.config.js**: Конфігурація інтернаціоналізації.
- **public/locales/**: Директорія з файлами локалізації.

## Документація (docs)

```
docs/
├── project_structure.md    # Структура проєкту
├── optimization_plan.md    # План оптимізації
├── optimization_results.md # Результати оптимізації
├── i18n_guide.md           # Керівництво з інтернаціоналізації
├── developer_guide.md      # Керівництво для розробників
└── api_reference.md        # Документація з API
```

### Опис документації

- **project_structure.md**: Опис структури проєкту (цей документ).
- **optimization_plan.md**: План оптимізації проєкту.
- **optimization_results.md**: Результати оптимізації проєкту.
- **i18n_guide.md**: Керівництво з інтернаціоналізації.
- **developer_guide.md**: Керівництво для розробників.
- **api_reference.md**: Документація з API.

## Резервні копії (backup)

```
backup/
├── app.py.bak             # Резервна копія app.py
├── models.py.bak          # Резервна копія models.py
└── ...
```

## Скрипти

- **start_servers.sh**: Скрипт для запуску серверів (фронтенд і бекенд).
- **stop_servers.sh**: Скрипт для зупинки серверів.

## Взаємодія компонентів

1. **Фронтенд** взаємодіє з **бекендом** через API, описане в `frontend-app/app/api.js`.
2. **Бекенд** обробляє запити від фронтенду та взаємодіє з базою даних через моделі, описані в `backend-api/models.py`.
3. **Локалізація** реалізована як на фронтенді (через `next-i18next`), так і на бекенді (через `utils/i18n.py`).
4. **Автентифікація** реалізована через JWT-токени, які генеруються на бекенді та зберігаються на фронтенді.
5. **Підписки** управляються через API бекенду та відображаються на фронтенді.
6. **Генерація контенту** відбувається на бекенді з використанням OpenAI API та відображається на фронтенді. 